<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--  This file is generated by Nim. -->
<html xmlns="https://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>src/aptos/accounts/aptos_account</title>

<!-- Favicon -->
<link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>
<link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH4QQQEwksSS9ZWwAAAk1JREFUWMPtll2ITVEUx39nn/O7Y5qR8f05wtCUUr6ZIS++8pEnkZInPImneaCQ5METNdOkeFBKUhMPRIkHKfEuUZSUlGlKPN2TrgfncpvmnntnmlEyq1Z7t89/rf9a6+y99oZxGZf/XeIq61EdtgKXgdXA0xrYAvBjOIF1AI9zvjcC74BSpndrJPkBWDScTF8Aa4E3wDlgHbASaANmVqlcCnwHvgDvgVfAJ+AikAAvgfVZwLnSVZHZaOuKoQi3ZOMi4NkYkpe1p4J7A8BpYAD49hfIy/oqG0+hLomiKP2L5L+1ubn5115S+3OAn4EnwBlgMzCjyt6ZAnQCJ4A7wOs88iRJHvw50HoujuPBoCKwHWiosy8MdfZnAdcHk8dxXFJ3VQbQlCTJvRBCGdRbD4M6uc5glpY3eAihpN5S5w12diSEcCCEcKUO4ljdr15T76ur1FDDLIQQ3qv71EdDOe3Kxj3leRXyk+pxdWnFWod6Wt2bY3de3aSuUHcPBVimHs7mK9WrmeOF6lR1o9qnzskh2ar2qm1qizpfXaPeVGdlmGN5pb09qMxz1Xb1kLqgzn1RyH7JUXW52lr5e/Kqi9qpto7V1atuUzfnARrV7jEib1T76gG2qxdGmXyiekkt1GswPTtek0aBfJp6YySGBfWg2tPQ0FAYgf1stUfdmdcjarbYJEniKIq6gY/Aw+zWHAC+p2labGpqiorFYgGYCEzN7oQdQClN07O1/EfDyGgC0ALMBdYAi4FyK+4H3gLPsxfR1zRNi+NP7nH5J+QntnXe5B5mpfQAAAAASUVORK5CYII=">

<!-- CSS -->
<link rel="stylesheet" type="text/css" href="nimdoc.out.css?v=2.0.4">

<!-- JS -->
<script type="text/javascript" src="dochack.js?v=2.0.4"></script>
</head>
<body>
  <div class="document" id="documentId">
    <div class="container">
      <h1 class="title">src/aptos/accounts/aptos_account</h1>
      <div class="row">
  <div class="three columns">
    <div class="theme-select-wrapper">
      <label for="theme-select">Theme:&nbsp;</label>
      <select id="theme-select" onchange="setTheme(this.value)">
        <option value="auto">ðŸŒ— Match OS</option>
        <option value="dark">ðŸŒ‘ Dark</option>
        <option value="light">ðŸŒ• Light</option>
      </select>
    </div>
    <div id="global-links">
      <ul class="simple">
        <li><a id="indexLink" href="theindex.html">Index</a></li>
      </ul>
    </div>
    <div id="searchInputDiv">
      Search: <input type="search" id="searchInput" onkeyup="search()"/>
    </div>
    <div>
      Group by:
      <select onchange="groupBy(this.value)">
        <option value="section">Section</option>
        <option value="type">Type</option>
      </select>
    </div>
    <ul class="simple simple-toc" id="toc-list">
  <li>
  <a class="reference reference-toplevel" href="#6" id="56">Imports</a>
</li>
<li>
  <details open>
    <summary><a class="reference reference-toplevel" href="#12" id="62">Procs</a></summary>
    <ul class="simple simple-toc-section">
      <ul class="simple nested-toc-section">accountFromKey
  <li><a class="reference" href="#accountFromKey%2Cstring%2Cstring" title="accountFromKey(address, prikey: string): RefAptosAccount">accountFromKey(address, prikey: string): RefAptosAccount</a></li>

</ul>
<ul class="simple nested-toc-section">createAccount
  <li><a class="reference" href="#createAccount%2CAptosClient" title="createAccount(client: AptosClient): Future[RefAptosAccount]">createAccount(client: AptosClient): Future[RefAptosAccount]</a></li>

</ul>
<ul class="simple nested-toc-section">getAddressFromKey
  <li><a class="reference" href="#getAddressFromKey%2Cstring" title="getAddressFromKey(pubkey: string): string">getAddressFromKey(pubkey: string): string</a></li>

</ul>
<ul class="simple nested-toc-section">signMsg
  <li><a class="reference" href="#signMsg%2CRefAptosAccount%2Cstring" title="signMsg(account: RefAptosAccount; msg: string): string">signMsg(account: RefAptosAccount; msg: string): string</a></li>

</ul>
<ul class="simple nested-toc-section">signTransaction
  <li><a class="reference" href="#signTransaction%2CRefAptosAccount%2CAptosClient%2CRawTransaction%5BT%3A%20TransactionPayload%5D%2Cstring" title="signTransaction[T: TransactionPayload](account: RefAptosAccount;
                                       client: AptosClient;
                                       transaction: RawTransaction[T];
                                       encodedTxn: string = &quot;&quot;): Future[
    SignedTransaction[T]]">signTransaction[T: TransactionPayload](account: RefAptosAccount;
                                       client: AptosClient;
                                       transaction: RawTransaction[T];
                                       encodedTxn: string = &quot;&quot;): Future[
    SignedTransaction[T]]</a></li>
<li><a class="reference" href="#signTransaction%2CRefAptosAccount%2CRawTransaction%5BT%3A%20TransactionPayload%5D%2Cstring" title="signTransaction[T: TransactionPayload](account: RefAptosAccount;
                                       transaction: RawTransaction[T];
                                       encodedTxn: string = &quot;&quot;): SignedTransaction[
    T]">signTransaction[T: TransactionPayload](account: RefAptosAccount;
                                       transaction: RawTransaction[T];
                                       encodedTxn: string = &quot;&quot;): SignedTransaction[
    T]</a></li>

</ul>
<ul class="simple nested-toc-section">verifySignature
  <li><a class="reference" href="#verifySignature%2CRefAptosAccount%2Cstring%2Cstring" title="verifySignature(account: RefAptosAccount; signature, msg: string): bool">verifySignature(account: RefAptosAccount; signature, msg: string): bool</a></li>

</ul>

    </ul>
  </details>
</li>

</ul>

  </div>
  <div class="nine columns" id="content">
    
    <div id="tocRoot"></div>
    
    <p class="module-desc">This module implements procs to work with the RefAptosAccount typestd importsnimble importsproject importsAptos Account signing procsAptos Account transaction procsAptos Account util procs</p>
    <div class="section" id="6">
  <h1><a class="toc-backref" href="#6">Imports</a></h1>
  <dl class="item">
    <a class="reference external" href="utils.html">utils</a>, <a class="reference external" href="ed25519.html">ed25519</a>, <a class="reference external" href="aptosclient.html">aptosclient</a>, <a class="reference external" href="transaction.html">transaction</a>, <a class="reference external" href="authenticator.html">authenticator</a>, <a class="reference external" href="payload.html">payload</a>
  </dl>
</div>
<div class="section" id="12">
  <h1><a class="toc-backref" href="#12">Procs</a></h1>
  <dl class="item">
    <div id="accountFromKey-procs-all">
  <div id="accountFromKey,string,string">
  <dt><pre><span class="Keyword">proc</span> <a href="#accountFromKey%2Cstring%2Cstring"><span class="Identifier">accountFromKey</span></a><span class="Other">(</span><span class="Identifier">address</span><span class="Other">,</span> <span class="Identifier">prikey</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span><span class="Other">:</span> <a href="utils.html#RefAptosAccount"><span class="Identifier">RefAptosAccount</span></a> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RegexError</span><span class="Other">,</span> <span class="Identifier">InvalidSeed</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">,</span> <span class="Identifier">SodiumError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="createAccount-procs-all">
  <div id="createAccount,AptosClient">
  <dt><pre><span class="Keyword">proc</span> <a href="#createAccount%2CAptosClient"><span class="Identifier">createAccount</span></a><span class="Other">(</span><span class="Identifier">client</span><span class="Other">:</span> <a href="utils.html#AptosClient"><span class="Identifier">AptosClient</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">Future</span><span class="Other">[</span><a href="utils.html#RefAptosAccount"><span class="Identifier">RefAptosAccount</span></a><span class="Other">]</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">stackTrace</span><span class="Other">:</span> <span class="DecNumber">false</span><span class="Other">,</span> <span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">ReadIOEffect</span><span class="Other">,</span> <span class="Identifier">WriteIOEffect</span><span class="Other">,</span> <span class="Identifier">RootEffect</span><span class="Other">,</span> <span class="Identifier">TimeEffect</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    This proc only creates a new random keypair and seed hash and it initializes a new RefAptosAccount object it does not how ever register the new wallet with the aptos blockchain. To do this use the faucet node to get APT into the wallet or call the aptos move function <tt class="docutils literal"><span class="pre"><span class="HexNumber">0x1</span><span class="Punctuation">:</span><span class="Punctuation">:</span><span class="Identifier">aptos_account</span><span class="Punctuation">:</span><span class="Punctuation">:</span><span class="Identifier">create_account</span></span></tt>. or call the registerAccount proc in the aptos.nim file NOTE :: registeration of account is chain specific. Which means registeration on devnet will not show on mainnet and vice versa
    
  </dd>
</div>

</div>
<div id="getAddressFromKey-procs-all">
  <div id="getAddressFromKey,string">
  <dt><pre><span class="Keyword">proc</span> <a href="#getAddressFromKey%2Cstring"><span class="Identifier">getAddressFromKey</span></a><span class="Other">(</span><span class="Identifier">pubkey</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RegexError</span><span class="Other">,</span> <span class="Identifier">InvalidSeed</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    gets address from public key for single Ed25519 accounts
    
  </dd>
</div>

</div>
<div id="signMsg-procs-all">
  <div id="signMsg,RefAptosAccount,string">
  <dt><pre><span class="Keyword">proc</span> <a href="#signMsg%2CRefAptosAccount%2Cstring"><span class="Identifier">signMsg</span></a><span class="Other">(</span><span class="Identifier">account</span><span class="Other">:</span> <a href="utils.html#RefAptosAccount"><span class="Identifier">RefAptosAccount</span></a><span class="Other">;</span> <span class="Identifier">msg</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">ValueError</span><span class="Other">,</span> <span class="Identifier">SodiumError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>
<div id="signTransaction-procs-all">
  <div id="signTransaction,RefAptosAccount,AptosClient,RawTransaction[T: TransactionPayload],string">
  <dt><pre><span class="Keyword">proc</span> <a href="#signTransaction%2CRefAptosAccount%2CAptosClient%2CRawTransaction%5BT%3A%20TransactionPayload%5D%2Cstring"><span class="Identifier">signTransaction</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">:</span> <a href="payload.html#TransactionPayload"><span class="Identifier">TransactionPayload</span></a><span class="Other">]</span><span class="Other">(</span><span class="Identifier">account</span><span class="Other">:</span> <a href="utils.html#RefAptosAccount"><span class="Identifier">RefAptosAccount</span></a><span class="Other">;</span>
    <span class="Identifier">client</span><span class="Other">:</span> <a href="utils.html#AptosClient"><span class="Identifier">AptosClient</span></a><span class="Other">;</span> <span class="Identifier">transaction</span><span class="Other">:</span> <a href="transaction.html#RawTransaction"><span class="Identifier">RawTransaction</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">encodedTxn</span><span class="Other">:</span> <span class="Identifier">string</span> <span class="Other">=</span> <span class="StringLit">&quot;&quot;</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">Future</span><span class="Other">[</span>
    <a href="transaction.html#SignedTransaction"><span class="Identifier">SignedTransaction</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">]</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">stackTrace</span><span class="Other">:</span> <span class="DecNumber">false</span></span>.}</pre></dt>
  <dd>
    
    signs transaction by encoding transaction to bcs on the node then signing it locally
    
  </dd>
</div>
<div id="signTransaction,RefAptosAccount,RawTransaction[T: TransactionPayload],string">
  <dt><pre><span class="Keyword">proc</span> <a href="#signTransaction%2CRefAptosAccount%2CRawTransaction%5BT%3A%20TransactionPayload%5D%2Cstring"><span class="Identifier">signTransaction</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">:</span> <a href="payload.html#TransactionPayload"><span class="Identifier">TransactionPayload</span></a><span class="Other">]</span><span class="Other">(</span><span class="Identifier">account</span><span class="Other">:</span> <a href="utils.html#RefAptosAccount"><span class="Identifier">RefAptosAccount</span></a><span class="Other">;</span>
    <span class="Identifier">transaction</span><span class="Other">:</span> <a href="transaction.html#RawTransaction"><span class="Identifier">RawTransaction</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">encodedTxn</span><span class="Other">:</span> <span class="Identifier">string</span> <span class="Other">=</span> <span class="StringLit">&quot;&quot;</span><span class="Other">)</span><span class="Other">:</span> <a href="transaction.html#SignedTransaction"><span class="Identifier">SignedTransaction</span></a><span class="Other">[</span>
    <span class="Identifier">T</span><span class="Other">]</span></pre></dt>
  <dd>
    
    signs transaction by encoding transaction to bcs locally then signing it locally
    
  </dd>
</div>

</div>
<div id="verifySignature-procs-all">
  <div id="verifySignature,RefAptosAccount,string,string">
  <dt><pre><span class="Keyword">proc</span> <a href="#verifySignature%2CRefAptosAccount%2Cstring%2Cstring"><span class="Identifier">verifySignature</span></a><span class="Other">(</span><span class="Identifier">account</span><span class="Other">:</span> <a href="utils.html#RefAptosAccount"><span class="Identifier">RefAptosAccount</span></a><span class="Other">;</span> <span class="Identifier">signature</span><span class="Other">,</span> <span class="Identifier">msg</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">ValueError</span><span class="Other">,</span> <span class="Identifier">SodiumError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">forbids</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    
    
  </dd>
</div>

</div>

  </dl>
</div>

  </div>
</div>

      <div class="twelve-columns footer">
        <span class="nim-sprite"></span>
        <br>
        <small style="color: var(--hint);">Made with Nim. Generated: 2024-06-20 20:29:49 UTC</small>
      </div>
    </div>
  </div>
  
  <!-- Google fonts -->
  <link href='https://fonts.googleapis.com/css?family=Lato:400,600,900' rel='stylesheet' type='text/css'/>
  <link href='https://fonts.googleapis.com/css?family=Source+Code+Pro:400,500,600' rel='stylesheet' type='text/css'/>
</body>
</html>
